<!--point-select.wxml-->
<navigation-bar title="选择地点" back="{{true}}" color="white" background="transparent"></navigation-bar>
<scroll-view class="scrollarea" scroll-y type="list">
  <view class="container">
    <!-- 搜索区域 -->
    <view class="search-section">
      <view class="search-box">
        <input class="search-input" placeholder="搜索地点..." value="{{searchKeyword}}" bind:input="onSearchInput" />
        <view class="search-icon">🔍</view>
      </view>
    </view>

    <!-- 地点列表区域 -->
    <view class="point-list-section">
      <view class="category-tabs">
        <view wx:for="{{categories}}" wx:key="key" class="tab-item {{selectedCategory === item.key ? 'active' : ''}}" bindtap="selectCategory" data-category="{{item.key}}">
          <text class="tab-text">{{item.name}}</text>
        </view>
      </view>

      <!-- 加载状态 -->
      <view wx:if="{{loading}}" class="loading-state">
        <text class="loading-text">正在加载点位数据...</text>
      </view>

      <!-- 点位列表 -->
      <scroll-view wx:else class="points-container" scroll-y enhanced show-scrollbar="{{false}}" fast-deceleration="{{true}}" bounces="{{true}}" paging-enabled="{{false}}">
        <view wx:for="{{filteredPoints}}" wx:key="id" class="point-item" bindtap="selectPoint" data-point="{{item}}" hover-class="point-item-hover">
          <view class="point-info">
            <text class="point-name">{{item.name}}</text>
            <text class="point-category">{{item.categoryName}}</text>
            <text class="point-address" wx:if="{{item.address}}">{{item.address}}</text>
            <text class="point-service" wx:if="{{item.serviceTime}}">服务时间：{{item.serviceTime}}</text>
          </view>
          <view class="point-select">
            <text class="select-text">选择</text>
          </view>
        </view>
        
        <!-- 空状态 -->
        <view wx:if="{{filteredPoints.length === 0 && !loading}}" class="empty-state">
          <text class="empty-text">暂无匹配的地点</text>
        </view>
      </scroll-view>
    </view>
  </view>
</scroll-view>
